
@{
    ViewBag.Title = "Nhập kho";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<header class="page-header page-header-compact page-header-light border-bottom bg-white mb-4">
    <div class="container-fluid px-4">
        <div class="page-header-content">
            <div class="row align-items-center justify-content-between pt-3">
                <div class="col-auto mb-3">
                    <h1 class="page-header-title">
                        <i class="fa-solid fa-right-to-bracket fa-lg"></i>&nbsp;Nhập kho
                    </h1>
                </div>
                <div class="col-12 col-xl-auto mb-3">
                    <button onclick="" class="btn btn-sm btn-light text-primary" data-bs-toggle="modal" data-bs-target="#modalThemMoiNhapKho">
                        <i class="me-1 fa-regular fa-square-plus"></i>
                        Thêm mới
                    </button>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main page content-->
<div class="w-100 container-fluid">
    <table id="tableNhapKho" class="table table-striped w-100">
        <thead>
            <tr>
                <th>Ngày nhập hàng</th>
                <th>Mã phiếu nhập</th>
                <th>Kho nhận</th>
                <th>Họ tên người nhận</th>
                <th>Tỷ giá</th>
                <th>Nhà cung cấp</th>
                <th>Ghi chú</th>
            </tr>
        </thead>
       <tbody></tbody>
    </table>           
</div>



<!-- Modal ThemMoiNhapKho -->
<div class="modal fade" id="modalThemMoiNhapKho" data-bs-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticThemMoiNhapKho" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen" role="document">
        <div class="modal-content">
            <div class="modal-header alert alert-success">
                <h5 class="modal-title" id="staticThemMoiNhapKho">Thêm mới Nhập kho</h5>
                <div>
                    <button class="btn btn-outline-secondary" type="button" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-circle-arrow-left me-2"></i></i>Quay lại</button>
                    <button class="btn btn-outline-success" type="button">Cập nhật <i class="fa-regular fa-paper-plane ms-2"></i></button>
                </div>
            </div>
            <div class="modal-body">
                <div class="form-group row mb-2">
                    <div class="col-lg-3">
                        <label class="fw-500 required">Phiếu nhập hàng <span class="text-danger">(*)</span> :</label>
                        @Html.DropDownList("SelectPhieuNhap", null,"Chọn phiếu nhập", new { @id = "SelectPhieuNhap", @class = "form-control", onchange = "handleSelectPhieuNhap()" })
                    </div>
                    <div class="col-lg-3">
                        <label class="fw-500">Kho nhận<span class="text-danger">(*)</span>:</label>
                        @Html.DropDownList("SelectKhoNhan", null, new { @id = "SelectKhoNhan", @class = "form-control"})
                    </div>
                    <div class="col-lg-3">
                        <label class="fw-500">Ngày nhận:</label>
                        <input type="datetime-local" class="form-control" required id="id_NgayNhapXuat" />
                    </div>
                    <div class="col-lg-3">
                        <label class="fw-500">Tỷ giá<span class="text-danger">(*)</span> :</label>
                        <input type="number" placeholder="0" class="form-control" required id="id_TyGia" />
                    </div>
                </div>
                <div class="form-group row mb-2">
                    <div class="col-lg-12">
                        <label class="fw-500">Ghi chú</label>
                        <textarea rows="1" type="text" class="form-control" id="id_GhiChu"></textarea>
                    </div>
                </div>
                <div>
                    <table id="tableDanhSachSanPham" class="table table-active">
                        <tr>
                            <th>Sản phẩm</th>
                            <th>Tính chất</th>
                            <th>Size</th>
                            <th>SL yêu cầu</th>
                            <th>Số lượng</th>
                            <th>Số lượng đã nhập</th>
                            <th>Đơn giá</th>
                            <th>Thành tiền</th>
                            <th>Đơn vị tính</th>
                            <th>Nhà cung cấp</th>
                            <th>Tồn kho</th>
                            <th>Ghi chú</th>
                        </tr>
                    </table>
                </div>
                @*<div class="modal-footer">
                    <button class="btn btn-success" type="button" onclick="themMoiNhapKho()">Xác nhận</button>
                </div>*@
            </div>
        </div>
    </div>
</div>

<!-- Modal XoaNhapKho -->
<div class="modal fade" id="modalXoaNhapKho" data-bs-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticXoaNhapKho" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticXoaSanPham">Xoá Nhập kho</h5>
                <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="text-center">
                    <i class="fa-solid fa-triangle-exclamation fa-beat fa-4x"></i>
                    <br />
                    <p class="fw-bolder">Cảnh báo</p>
                </div>

                <div class="modal-footer justify-content-center">
                    <button class="btn btn-danger" type="button" onclick="">Xoá</button>
                    <button class="btn btn-secondary" type="button" data-bs-dismiss="modal">Quay lại</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    
    const handleSelectPhieuNhap = () => {
        console.log($("#SelectPhieuNhap").val())
        $.ajax({
            url: "",
            type: "post",
            data: {
                maPhieuNhap: $("#SelectPhieuNhap").val()
            },
        })
    }
    const randomMaPhieu = (length) => {
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        let result = '';
        const charactersLength = characters.length;
        for (let i = 0; i < length; i++) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }
        return 'NK_'+result;
    }
    
</script>


